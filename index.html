<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <title>Bella Massa â€¢ CardÃ¡pio</title>

  <!-- VIEWPORT IOS SAFE -->
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />

  <!-- CSS -->
  <link rel="stylesheet" href="styles.css" />
</head>

<body>

  <!-- ================= HEADER ================= -->
  <header class="site-header" role="banner">
    <div class="container" style="display:flex;align-items:center;justify-content:space-between;gap:12px">
      <div>
        <h1 id="store-name" style="margin:0;font-size:20px">Bella Massa</h1>
        <small style="opacity:.9">ğŸ• Visual premium â€¢ Pedidos rÃ¡pidos</small>
      </div>

      <!-- href serÃ¡ atualizado pelo app.js; rel por seguranÃ§a -->
      <a id="store-phone" href="#" target="_blank" rel="noopener noreferrer" class="btn-ghost" aria-label="Pedir pelo WhatsApp">
        ğŸ“ Pedir no WhatsApp
      </a>
    </div>
  </header>

  <!-- ================= CATEGORIAS ================= -->
  <nav id="categories" class="categories" aria-label="Categorias" role="navigation"></nav>

  <!-- ================= PRODUTOS ================= -->
  <main id="products" class="products-grid" role="main" aria-live="polite"></main>

  <!-- ================= CARRINHO ================= -->
  <aside id="cart" class="cart hidden" aria-label="Carrinho" aria-hidden="true">
    <!-- preenchido pelo app.js -->
  </aside>

  <!-- ================= BOTÃƒO FLUTUANTE ================= -->
  <button id="btn-cart" class="whats-float" type="button" aria-controls="cart" aria-expanded="false" aria-label="Ver pedido">
    ğŸŸ¢ Ver pedido
  </button>

  <!-- ================= MODAIS ================= -->
  <div id="modal-root" aria-hidden="true"></div>

  <!-- ================= APP (DEFER evita problemas de ordem) ================= -->
  <script src="app.js" defer></script>

  <!-- ================= INIT SEGURO ================= -->
  <script>
    // inicializaÃ§Ã£o segura: usa DOMContentLoaded (app.js carregado com defer)
    document.addEventListener("DOMContentLoaded", () => {
      // inicia o app pÃºblico (se estiver disponÃ­vel)
      if (window.app && typeof window.app.renderPublic === "function") {
        try { window.app.renderPublic(); } catch (err) { console.error("renderPublic error:", err); }
      }

      // controle do carrinho com aria-expanded (acessibilidade)
      const btnCart = document.getElementById("btn-cart");
      const cart = document.getElementById("cart");

      if (btnCart && cart) {
        btnCart.addEventListener("click", () => {
          const isHidden = cart.classList.toggle("hidden");
          // aria-expanded: true = aberto, false = fechado
          btnCart.setAttribute("aria-expanded", String(!isHidden));
          cart.setAttribute("aria-hidden", String(isHidden));
        });
      }
    });
  </script>

  <noscript>
    <div style="padding:12px;background:#fff3cd;color:#856404;text-align:center;">
      JavaScript estÃ¡ desativado â€” o site precisa de JavaScript para funcionar corretamente.
    </div>
  </noscript>

</body>
</html>